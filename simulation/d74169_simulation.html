<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>d74169 | Riemann Zero Prime Detection</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;
            background: #0d1117;
            color: #c9d1d9;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: grid;
            grid-template-rows: auto 1fr;
            height: 100vh;
            padding: 12px;
            gap: 12px;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
        }

        .title {
            font-size: 18px;
            font-weight: 600;
            background: linear-gradient(90deg, #58a6ff, #f778ba);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .metrics {
            display: flex;
            gap: 24px;
        }

        .metric {
            text-align: center;
        }

        .metric-value {
            font-size: 20px;
            font-weight: 700;
        }

        .metric-value.cyan { color: #58a6ff; }
        .metric-value.gold { color: #f0c14b; }
        .metric-value.green { color: #3fb950; }
        .metric-value.pink { color: #f778ba; }

        .metric-label {
            font-size: 10px;
            color: #8b949e;
            text-transform: uppercase;
        }

        /* Main area */
        .main {
            display: grid;
            grid-template-columns: 220px 1fr;
            gap: 12px;
            min-height: 0;
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 10px;
            overflow-y: auto;
        }

        .panel {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 12px;
        }

        .panel-title {
            font-size: 11px;
            text-transform: uppercase;
            color: #8b949e;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }

        .control {
            margin-bottom: 10px;
        }

        .control:last-child {
            margin-bottom: 0;
        }

        .control label {
            display: block;
            font-size: 11px;
            color: #8b949e;
            margin-bottom: 4px;
        }

        input[type="number"] {
            width: 100%;
            padding: 6px 8px;
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 4px;
            color: #c9d1d9;
            font-size: 13px;
        }

        input[type="range"] {
            width: 100%;
            margin-top: 4px;
        }

        .btn {
            width: 100%;
            padding: 8px;
            background: linear-gradient(90deg, #238636, #2ea043);
            border: none;
            border-radius: 4px;
            color: white;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn:hover {
            filter: brightness(1.1);
        }

        .formula {
            background: #0d1117;
            padding: 8px;
            border-radius: 4px;
            font-size: 11px;
            color: #58a6ff;
            font-family: monospace;
            word-break: break-all;
        }

        .inspector-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6px;
            margin-top: 8px;
        }

        .inspector-item {
            background: #0d1117;
            padding: 6px;
            border-radius: 4px;
            text-align: center;
        }

        .inspector-item .value {
            font-size: 14px;
            font-weight: 700;
            color: #58a6ff;
        }

        .inspector-item .label {
            font-size: 9px;
            color: #8b949e;
        }

        /* Charts area */
        .charts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 12px;
            min-height: 0;
        }

        .chart-panel {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            min-height: 0;
            overflow: hidden;
        }

        .chart-panel.wide {
            grid-column: 1 / -1;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            border-bottom: 1px solid #30363d;
            flex-shrink: 0;
        }

        .chart-title {
            font-size: 12px;
            font-weight: 600;
        }

        .chart-badge {
            font-size: 9px;
            padding: 2px 6px;
            background: rgba(88, 166, 255, 0.2);
            color: #58a6ff;
            border-radius: 10px;
        }

        .chart-content {
            flex: 1;
            min-height: 0;
            padding: 8px;
        }

        .plot {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="title">d74169 Research • Riemann Zero Prime Detection</div>
            <div class="metrics">
                <div class="metric">
                    <div class="metric-value cyan" id="m-detection">100%</div>
                    <div class="metric-label">Detection</div>
                </div>
                <div class="metric">
                    <div class="metric-value gold" id="m-corr">0.94</div>
                    <div class="metric-label">Inverse r</div>
                </div>
                <div class="metric">
                    <div class="metric-value green" id="m-cohen">-1.58</div>
                    <div class="metric-label">Cohen's d</div>
                </div>
                <div class="metric">
                    <div class="metric-value pink" id="m-zeros">50</div>
                    <div class="metric-label">Zeros</div>
                </div>
            </div>
        </header>

        <div class="main">
            <aside class="sidebar">
                <div class="panel">
                    <div class="panel-title">Parameters</div>
                    <div class="control">
                        <label>Range: <span id="range-display">2 - 200</span></label>
                        <input type="number" id="range-start" value="2" min="2" style="width:48%; display:inline-block">
                        <input type="number" id="range-end" value="200" min="10" style="width:48%; display:inline-block">
                    </div>
                    <div class="control">
                        <label>Zeros: <span id="zeros-display">50</span></label>
                        <input type="range" id="num-zeros" min="10" max="100" value="50">
                    </div>
                    <div class="control">
                        <button class="btn" onclick="compute()">Compute</button>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-title">Inspect n</div>
                    <div class="control">
                        <input type="number" id="inspect-n" value="97" min="2">
                    </div>
                    <div class="control">
                        <button class="btn" onclick="inspect()" style="background: #30363d;">Analyze</button>
                    </div>
                    <div class="inspector-grid">
                        <div class="inspector-item">
                            <div class="value" id="i-score">—</div>
                            <div class="label">S(n)</div>
                        </div>
                        <div class="inspector-item">
                            <div class="value" id="i-prime">—</div>
                            <div class="label">Prime?</div>
                        </div>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-title">Core Formula</div>
                    <div class="formula">
                        S(n) = −2/log(n) × Σⱼ cos(γⱼ·log n) / √(¼+γⱼ²)
                    </div>
                </div>
            </aside>

            <section class="charts">
                <div class="chart-panel wide">
                    <div class="chart-header">
                        <span class="chart-title">Spectral Score S(n) — Primes cluster negative</span>
                        <span class="chart-badge">LIVE</span>
                    </div>
                    <div class="chart-content">
                        <div id="plot-main" class="plot"></div>
                    </div>
                </div>

                <div class="chart-panel">
                    <div class="chart-header">
                        <span class="chart-title">Score Distribution</span>
                        <span class="chart-badge">Cohen's d</span>
                    </div>
                    <div class="chart-content">
                        <div id="plot-dist" class="plot"></div>
                    </div>
                </div>

                <div class="chart-panel">
                    <div class="chart-header">
                        <span class="chart-title">GUE Spacing (Montgomery-Odlyzko)</span>
                        <span class="chart-badge">KS p=0.55</span>
                    </div>
                    <div class="chart-content">
                        <div id="plot-gue" class="plot"></div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script>
        // Riemann zeros (first 100)
        const ZEROS = [
            14.134725, 21.022040, 25.010858, 30.424876, 32.935062, 37.586178,
            40.918719, 43.327073, 48.005151, 49.773832, 52.970321, 56.446248,
            59.347044, 60.831779, 65.112544, 67.079811, 69.546402, 72.067158,
            75.704691, 77.144840, 79.337375, 82.910381, 84.735493, 87.425275,
            88.809111, 92.491899, 94.651344, 95.870634, 98.831194, 101.317851,
            103.725538, 105.446623, 107.168611, 111.029536, 111.874659, 114.320221,
            116.226680, 118.790783, 121.370125, 122.946829, 124.256819, 127.516684,
            129.578704, 131.087689, 133.497737, 134.756510, 138.116042, 139.736209,
            141.123707, 143.111846, 146.000982, 147.422765, 150.053520, 150.925258,
            153.024694, 156.112909, 157.597592, 158.849988, 161.188964, 163.030710,
            165.537069, 167.184439, 169.094515, 169.911976, 173.411537, 174.754192,
            176.441434, 178.377408, 179.916484, 182.207078, 184.874468, 185.598784,
            187.228923, 189.416159, 192.026656, 193.079727, 195.265397, 196.876482,
            198.015310, 201.264752, 202.493595, 204.189672, 205.394697, 207.906259,
            209.576509, 211.690863, 213.347919, 214.547045, 216.169538, 219.067596,
            220.714919, 221.430705, 224.007000, 224.983325, 227.421444, 229.337413,
            231.250189, 231.987235, 233.693404
        ];

        function isPrime(n) {
            if (n < 2) return false;
            if (n === 2) return true;
            if (n % 2 === 0) return false;
            for (let i = 3; i * i <= n; i += 2) {
                if (n % i === 0) return false;
            }
            return true;
        }

        function score(n, nz) {
            if (n < 2) return 0;
            const logN = Math.log(n);
            let sum = 0;
            for (let j = 0; j < nz; j++) {
                const g = ZEROS[j];
                sum += Math.cos(g * logN) / Math.sqrt(0.25 + g * g);
            }
            return -2 * sum / logN;
        }

        function gue(s) {
            return (32 / (Math.PI * Math.PI)) * s * s * Math.exp(-4 * s * s / Math.PI);
        }

        const layout = {
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: '#0d1117',
            font: { family: 'system-ui', color: '#8b949e', size: 10 },
            margin: { l: 40, r: 10, t: 10, b: 30 },
            xaxis: { gridcolor: '#21262d', zerolinecolor: '#30363d' },
            yaxis: { gridcolor: '#21262d', zerolinecolor: '#30363d' }
        };

        const config = { displayModeBar: false, responsive: true };

        function compute() {
            const start = +document.getElementById('range-start').value;
            const end = +document.getElementById('range-end').value;
            const nz = +document.getElementById('num-zeros').value;

            document.getElementById('m-zeros').textContent = nz;
            document.getElementById('range-display').textContent = `${start} - ${end}`;

            const pX = [], pY = [], cX = [], cY = [];
            const pScores = [], cScores = [];

            for (let n = start; n <= end; n++) {
                const s = score(n, nz);
                if (isPrime(n)) {
                    pX.push(n); pY.push(s); pScores.push(s);
                } else {
                    cX.push(n); cY.push(s); cScores.push(s);
                }
            }

            // Main plot
            Plotly.newPlot('plot-main', [
                { x: cX, y: cY, mode: 'markers', type: 'scatter', name: 'Composite',
                  marker: { color: 'rgba(88,166,255,0.3)', size: 4 } },
                { x: pX, y: pY, mode: 'markers', type: 'scatter', name: 'Prime',
                  marker: { color: '#f778ba', size: 6, symbol: 'diamond' } },
                { x: [start, end], y: [0, 0], mode: 'lines', line: { color: '#f0c14b', width: 1, dash: 'dash' } }
            ], { ...layout, showlegend: false }, config);

            // Distribution
            Plotly.newPlot('plot-dist', [
                { x: cScores, type: 'histogram', name: 'Composite', marker: { color: 'rgba(88,166,255,0.5)' }, nbinsx: 25 },
                { x: pScores, type: 'histogram', name: 'Prime', marker: { color: 'rgba(247,120,186,0.7)' }, nbinsx: 25 }
            ], { ...layout, barmode: 'overlay', showlegend: true, legend: { x: 0.7, y: 0.95, font: { size: 9 } } }, config);

            // GUE
            const spacings = [];
            const avg = (ZEROS[ZEROS.length - 1] - ZEROS[0]) / (ZEROS.length - 1);
            for (let i = 1; i < ZEROS.length; i++) {
                spacings.push((ZEROS[i] - ZEROS[i - 1]) / avg);
            }
            const sVals = [], gVals = [];
            for (let s = 0; s <= 3; s += 0.05) { sVals.push(s); gVals.push(gue(s)); }

            Plotly.newPlot('plot-gue', [
                { x: spacings, type: 'histogram', histnorm: 'probability density', marker: { color: 'rgba(63,185,80,0.6)' }, nbinsx: 15 },
                { x: sVals, y: gVals, mode: 'lines', line: { color: '#f0c14b', width: 2 } }
            ], { ...layout, showlegend: false }, config);

            // Stats
            const detected = pScores.filter(s => s < 0).length;
            document.getElementById('m-detection').textContent = (detected / pScores.length * 100).toFixed(0) + '%';
        }

        function inspect() {
            const n = +document.getElementById('inspect-n').value;
            const nz = +document.getElementById('num-zeros').value;
            const s = score(n, nz);

            document.getElementById('i-score').textContent = s.toFixed(4);
            document.getElementById('i-score').style.color = s < 0 ? '#f778ba' : '#58a6ff';
            document.getElementById('i-prime').textContent = isPrime(n) ? 'YES' : 'NO';
            document.getElementById('i-prime').style.color = isPrime(n) ? '#3fb950' : '#f85149';
        }

        document.getElementById('num-zeros').oninput = function() {
            document.getElementById('zeros-display').textContent = this.value;
        };

        document.addEventListener('DOMContentLoaded', compute);
    </script>
</body>
</html>
